<!DOCTYPE html>
<html>
<head>
    <title>Item Details</title>
    <meta charset = "UTF-8">
    <style>
        table {
            border: 5px solid #000000;
            width: 500px;
            height: 500px;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <table id="status">
        <tr>
            <th>
                NOW STATUS
            </th>
        </tr>
    </table>
    <script type="text/javascript">
        // ID FOR SHOWING CURRENT STATUS
        const status = document.getElementById("status");

        // CREATE WEBSOCKET CONN
        const socket = new WebSocket("ws://0.0.0.0:8000/ws");

        socket.addEventListener("message", function(event) {
            const data = JSON.parse(event.data)
            const anybodyThere = data.anybodyThere;

            // PRINT FOR DEBUG
            console.log(typeof anybodyThere);
            console.log(anybodyThere);

            // SHOW STATUS WITH PIR SENSOR DATA
            if (anybodyThere === 1) {
                status.style.backgroundColor = "red";
                window.navigator.vibrate(700);
            } else {
                status.style.backgroundColor = "white";
                window.navigator.vibrate(0);
            }
        });

        // HANDLE SOCKET ERROR
        socket.addEventListener("error", function(event) {
            console.error("WebSocket ERROR: ", event);
        });

        // HANDLE SOCKET CLOSE
        socket.addEventListener("close", function(event) {
            console.error("WebSocket CLOSE: ", event);
        });
    </script>
</body>